<Addin name        = "NuGet Package Management"
       id          = "PackageManagement"
       namespace   = "MonoDevelop"
       author      = "Matt Ward"
       copyright   = "MIT X11"
       url         = "https://github.com/mrward/monodevelop-nuget-addin"
       description = "Provides support for adding and maintaining NuGet packages in your project. Updated to use NuGet 2.7.2"
       category    = "IDE extensions"
       version     = "4.2.3">

	<Header>
		<ReleaseNotesFile>ReleaseNotes.txt</ReleaseNotesFile>
	</Header>
	
	<Runtime>
		<Import assembly="MonoDevelop.PackageManagement.dll" />
		<Import assembly="Microsoft.Web.XmlTransform.dll" />
		<Import assembly="NuGet.Core.dll" />
		<Import file="NuGet.exe" />
	</Runtime>

	<Dependencies>
		<Addin id="Core" version="4.2.3"/>
		<Addin id="Ide" version="4.2.3"/>
	</Dependencies>

	<Extension path = "/MonoDevelop/Ide/Commands">
		<Command
			id = "MonoDevelop.PackageManagement.Commands.AddPackages"
			_description = "Add Packages"
			_label = "Add _Packages..."
			defaultHandler = "MonoDevelop.PackageManagement.Commands.AddPackagesHandler" />
		<Command
			id = "MonoDevelop.PackageManagement.Commands.RestorePackages"
			_description = "Restore packages"
			_label = "_Restore Packages"
			defaultHandler = "MonoDevelop.PackageManagement.Commands.RestorePackagesHandler" />
		<Command
			id="MonoDevelop.PackageManagement.Commands.Restore"
			_description="Restore"
			_label="_Restore"
			defaultHandler="MonoDevelop.PackageManagement.Commands.RestorePackagesHandler" />
		<Command
			id="MonoDevelop.PackageManagement.Commands.PackageReferenceNodeCommands.ShowPackageVersion"
			_description="Show package version"
			_label="Version" />
		<Command
			id="MonoDevelop.PackageManagement.Commands.PackageReferenceNodeCommands.UpdatePackage"
			_description="Update"
			_label="_Update" />
	</Extension>
	
	<Extension path = "/MonoDevelop/Ide/MainMenu/Project">
		<CommandItem
			id = "MonoDevelop.PackageManagement.Commands.AddPackages"
			insertafter = "MonoDevelop.Ide.Commands.ProjectCommands.AddReference"
			insertbefore = "ExportSeparator" />
		<CommandItem
			id = "MonoDevelop.PackageManagement.Commands.RestorePackages"
			insertafter = "MonoDevelop.PackageManagement.Commands.ManagePackages"
			insertbefore = "ExportSeparator" />
	</Extension>
	
	<Extension path = "/MonoDevelop/Ide/ContextMenu/ProjectPad">
		<Condition id="ItemType" value="Project">
			<CommandItem
				id = "MonoDevelop.PackageManagement.Commands.AddPackages"
				insertafter = "MonoDevelop.Ide.Commands.ProjectCommands.AddReference"
				insertbefore = "AddSectionEnd" />
			<CommandItem
				id = "MonoDevelop.PackageManagement.Commands.RestorePackages"
				insertafter = "MonoDevelop.PackageManagement.Commands.AddReference"
				insertbefore = "AddSectionEnd" />
		</Condition>
		<Condition id="ItemType" value="MonoDevelop.PackageManagement.NodeBuilders.ProjectPackagesFolderNode">
			<CommandItem
				id="MonoDevelop.PackageManagement.Commands.AddPackages" />
			<CommandItem
				id="MonoDevelop.PackageManagement.Commands.Restore" />
		</Condition>
	</Extension>
	
	<Extension path="/MonoDevelop/Core/StockIcons">
		<StockIcon stockid="md-nuget-package" resource="packageicon.png" />
	</Extension>
	
	<Extension path="/MonoDevelop/Ide/GlobalOptionsDialog">
		<Section id="NuGetPackageManagement" _label="NuGet">
			<Section
				id="General"
				_label="General"
				fill="true"
				class="MonoDevelop.PackageManagement.Gui.PackageManagementOptionsPanel" />
			<Section
				id="PackageSources"
				_label="Package Sources"
				fill="true"
				class="MonoDevelop.PackageManagement.Gui.PackageSourcesOptionsPanel" />
		</Section>
	</Extension>

	<Extension path="/MonoDevelop/Ide/ProjectTemplatePackageInstallers">
		<Class id="NuGet" class="MonoDevelop.PackageManagement.ProjectTemplateNuGetPackageInstaller" />
	</Extension>

	<Extension path="/MonoDevelop/Ide/Pads/ProjectPad">
		<NodeBuilder class="MonoDevelop.PackageManagement.NodeBuilders.ProjectPackagesProjectNodeBuilderExtension" />
		<NodeBuilder class="MonoDevelop.PackageManagement.NodeBuilders.ProjectPackagesFolderNodeBuilder" />
		<NodeBuilder class="MonoDevelop.PackageManagement.NodeBuilders.PackageReferenceNodeBuilder" />
	</Extension>

	<ExtensionPoint path = "/MonoDevelop/PackageManagement/ContextMenu/ProjectPad/PackageReference">
		<ExtensionNodeSet id="MonoDevelop.Components.Commands.ItemSet"/>
	</ExtensionPoint>

	<Extension path="/MonoDevelop/PackageManagement/ContextMenu/ProjectPad/PackageReference">
		<CommandItem id="MonoDevelop.PackageManagement.Commands.PackageReferenceNodeCommands.ShowPackageVersion" />
		<CommandItem id="MonoDevelop.Ide.Commands.EditCommands.Delete" />
		<CommandItem id="MonoDevelop.PackageManagement.Commands.PackageReferenceNodeCommands.UpdatePackage" />
	</Extension>
</Addin>
